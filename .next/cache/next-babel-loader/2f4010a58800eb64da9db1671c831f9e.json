{"ast":null,"code":"var __jsx = React.createElement;\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport React, { Component } from \"react\";\nimport { Table, Button, Message, Icon, Popup } from \"semantic-ui-react\";\nimport web3 from \"../Ethereum/web3\";\nimport Campaign from \"../Ethereum/campaign\";\nexport default class RequestRow extends Component {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"state\", {\n      errorMessageApprove: \"\",\n      loadingApprove: false,\n      errorMessageFinalize: \"\",\n      loadingFinalize: false,\n      loadingWithdraw: false,\n      errorMessageWithdraw: \"\"\n    });\n    _defineProperty(this, \"onApprove\", async () => {\n      this.setState({\n        loadingApprove: true,\n        errorMessageApprove: \"\"\n      });\n      try {\n        const campaign = Campaign(this.props.address);\n        const accounts = await web3.eth.getAccounts();\n        await campaign.methods.approveRequest(this.props.id).send({\n          from: accounts[0]\n        });\n      } catch (error) {\n        this.setState({\n          errorMessageApprove: error.message\n        });\n      } finally {\n        this.setState({\n          loadingApprove: false\n        });\n      }\n    });\n    _defineProperty(this, \"onFinalize\", async () => {\n      this.setState({\n        loadingFinalize: true,\n        errorMessageFinalize: \"\"\n      });\n      try {\n        const campaign = Campaign(this.props.address);\n        const accounts = await web3.eth.getAccounts();\n        await campaign.methods.finalizeRequest(this.props.id).send({\n          from: accounts[0]\n        });\n      } catch (error) {\n        this.setState({\n          errorMessageFinalize: error.message\n        });\n      } finally {\n        this.setState({\n          loadingFinalize: false\n        });\n      }\n    });\n    _defineProperty(this, \"onWithdraw\", async () => {\n      this.setState({\n        loadingWithdraw: true,\n        errorMessageWithdraw: \"\"\n      });\n      try {\n        const campaign = Campaign(this.props.address);\n        const accounts = await web3.eth.getAccounts();\n        await campaign.methods.withdraw(this.props.id).send({\n          from: accounts[0]\n        });\n      } catch (error) {\n        this.setState({\n          errorMessageWithdraw: error.message\n        });\n      } finally {\n        this.setState({\n          loadingWithdraw: false\n        });\n      }\n    });\n  }\n  render() {\n    const {\n      Row,\n      Cell\n    } = Table;\n    const {\n      id,\n      request,\n      approversCount,\n      withdrawn\n    } = this.props;\n    const readyToFinalize = request.approvalCount > approversCount / 2;\n    return __jsx(Row, {\n      disabled: request.complete,\n      positive: readyToFinalize && !request.complete\n    }, __jsx(Cell, null, id), __jsx(Cell, null, request.description), __jsx(Cell, null, web3.utils.fromWei(request.value, \"ether\"), \" (ether)\"), __jsx(Cell, null, request.recipient), __jsx(Cell, null, request.approvalCount, \"/\", approversCount), __jsx(Cell, null, request.withdrawn ? \"Withdrawn\" : __jsx(Button, {\n      color: \"green\",\n      onClick: () => {\n        console.log(\"Hello\");\n      }\n    }, \"Withdrawn Now\")), __jsx(Cell, {\n      error: !!this.state.errorMessageApprove\n    }, __jsx(Popup, {\n      header: \"Error\",\n      content: this.state.errorMessageApprove,\n      trigger: __jsx(Icon, {\n        name: \"attention\",\n        style: {\n          display: this.state.errorMessageApprove ? \"inline-block\" : \"none\"\n        }\n      }),\n      hoverable: true\n    }), request.complete ? null : __jsx(Button, {\n      color: \"green\",\n      loading: this.state.loadingApprove,\n      basic: true,\n      onClick: this.onApprove\n    }, \"Approve\")), __jsx(Cell, {\n      error: !!this.state.errorMessageFinalize\n    }, __jsx(Popup, {\n      header: \"Error\",\n      content: this.state.errorMessageFinalize,\n      trigger: __jsx(Icon, {\n        name: \"attention\",\n        style: {\n          display: this.state.errorMessageFinalize ? \"inline-block\" : \"none\"\n        }\n      }),\n      hoverable: true\n    }), request.complete ? null : __jsx(Button, {\n      color: \"teal\",\n      loading: this.state.loadingFinalize,\n      basic: true,\n      onClick: this.onFinalize\n    }, \"Finalize\")));\n  }\n}","map":{"version":3,"names":["React","Component","Table","Button","Message","Icon","Popup","web3","Campaign","RequestRow","errorMessageApprove","loadingApprove","errorMessageFinalize","loadingFinalize","loadingWithdraw","errorMessageWithdraw","setState","campaign","props","address","accounts","eth","getAccounts","methods","approveRequest","id","send","from","error","message","finalizeRequest","withdraw","render","Row","Cell","request","approversCount","withdrawn","readyToFinalize","approvalCount","complete","description","utils","fromWei","value","recipient","console","log","state","display","onApprove","onFinalize"],"sources":["/home/deon/Downloads/CROWDFUNDING PLATFORM/components/RequestRow.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { Table, Button, Message, Icon, Popup } from \"semantic-ui-react\";\r\nimport web3 from \"../Ethereum/web3\";\r\nimport Campaign from \"../Ethereum/campaign\";\r\n\r\nexport default class RequestRow extends Component {\r\n  state = {\r\n    errorMessageApprove: \"\",\r\n    loadingApprove: false,\r\n    errorMessageFinalize: \"\",\r\n    loadingFinalize: false,\r\n    loadingWithdraw: false,\r\n    errorMessageWithdraw: \"\",\r\n  };\r\n\r\n  onApprove = async () => {\r\n    this.setState({\r\n      loadingApprove: true,\r\n      errorMessageApprove: \"\",\r\n    });\r\n\r\n    try {\r\n      const campaign = Campaign(this.props.address);\r\n\r\n      const accounts = await web3.eth.getAccounts();\r\n      await campaign.methods.approveRequest(this.props.id).send({\r\n        from: accounts[0],\r\n      });\r\n    } catch (error) {\r\n      this.setState({\r\n        errorMessageApprove: error.message,\r\n      });\r\n    } finally {\r\n      this.setState({\r\n        loadingApprove: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  onFinalize = async () => {\r\n    this.setState({\r\n      loadingFinalize: true,\r\n      errorMessageFinalize: \"\",\r\n    });\r\n    try {\r\n      const campaign = Campaign(this.props.address);\r\n\r\n      const accounts = await web3.eth.getAccounts();\r\n\r\n      await campaign.methods.finalizeRequest(this.props.id).send({\r\n        from: accounts[0],\r\n      });\r\n    } catch (error) {\r\n      this.setState({\r\n        errorMessageFinalize: error.message,\r\n      });\r\n    } finally {\r\n      this.setState({\r\n        loadingFinalize: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  onWithdraw = async () => {\r\n    this.setState({\r\n      loadingWithdraw: true,\r\n      errorMessageWithdraw: \"\",\r\n    });\r\n\r\n    try {\r\n      const campaign = Campaign(this.props.address);\r\n\r\n      const accounts = await web3.eth.getAccounts();\r\n      await campaign.methods.withdraw(this.props.id).send({\r\n        from: accounts[0],\r\n      });\r\n\r\n    } catch (error) {\r\n      this.setState({\r\n        errorMessageWithdraw: error.message,\r\n      });\r\n    } finally {\r\n      this.setState({\r\n        loadingWithdraw: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { Row, Cell } = Table;\r\n    const { id, request, approversCount, withdrawn } = this.props;\r\n    const readyToFinalize = request.approvalCount > approversCount / 2;\r\n\r\n    return (\r\n      <Row\r\n        disabled={request.complete}\r\n        positive={readyToFinalize && !request.complete}\r\n      >\r\n        <Cell>{id}</Cell>\r\n        <Cell>{request.description}</Cell>\r\n        <Cell>{web3.utils.fromWei(request.value, \"ether\")} (ether)</Cell>\r\n        <Cell>{request.recipient}</Cell>\r\n        <Cell>\r\n          {request.approvalCount}/{approversCount}\r\n        </Cell>\r\n        <Cell>\r\n          {request.withdrawn ? (\r\n            \"Withdrawn\"\r\n          ) : (\r\n            <Button\r\n              color=\"green\"\r\n              onClick={() => {\r\n                console.log(\"Hello\");\r\n              }}\r\n            >\r\n              Withdrawn Now\r\n            </Button>\r\n          )}\r\n        </Cell>\r\n        <Cell error={!!this.state.errorMessageApprove}>\r\n          <Popup\r\n            header=\"Error\"\r\n            content={this.state.errorMessageApprove}\r\n            trigger={\r\n              <Icon\r\n                name=\"attention\"\r\n                style={{\r\n                  display: this.state.errorMessageApprove\r\n                    ? \"inline-block\"\r\n                    : \"none\",\r\n                }}\r\n              />\r\n            }\r\n            hoverable\r\n          />\r\n          {request.complete ? null : (\r\n            <Button\r\n              color=\"green\"\r\n              loading={this.state.loadingApprove}\r\n              basic\r\n              onClick={this.onApprove}\r\n            >\r\n              Approve\r\n            </Button>\r\n          )}\r\n        </Cell>\r\n        <Cell error={!!this.state.errorMessageFinalize}>\r\n          <Popup\r\n            header=\"Error\"\r\n            content={this.state.errorMessageFinalize}\r\n            trigger={\r\n              <Icon\r\n                name=\"attention\"\r\n                style={{\r\n                  display: this.state.errorMessageFinalize\r\n                    ? \"inline-block\"\r\n                    : \"none\",\r\n                }}\r\n              />\r\n            }\r\n            hoverable\r\n          />\r\n          {request.complete ? null : (\r\n            <Button\r\n              color=\"teal\"\r\n              loading={this.state.loadingFinalize}\r\n              basic\r\n              onClick={this.onFinalize}\r\n            >\r\n              Finalize\r\n            </Button>\r\n          )}\r\n        </Cell>\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}